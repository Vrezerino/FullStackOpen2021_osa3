(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),s=n(17),o=n.n(s),i=n(3),u=n(0),a=function(e){var t=e.id,n=e.name,r=e.number,c=e.deletePerson;return Object(u.jsxs)("div",{children:[Object(u.jsx)("b",{children:n}),", tel: ",r," ",Object(u.jsx)("img",{alt:"delete person",onClick:function(){return c(t)},src:"/x.png"})]},t)},d=n(5),l=n.n(d),j="/api/persons",b={getAll:function(){return l.a.get(j).then((function(e){return e.data}))},createPerson:function(e){return l.a.post(j,e).then((function(e){return e.data}))},deletePerson:function(e){return l.a.delete(j+"/"+e).then((function(e){return e.data}))},updateNumber:function(e,t){return l.a.put(j+"/"+e,t).then((function(e){return e.data}))}},h=function(e){var t=e.people,n=e.filterResults,r=e.setPeople,c=e.setMessage,s=function(e){window.confirm("Are you sure you want to delete this entry?")&&(b.deletePerson(e).then((function(n){r(t.filter((function(t){return t.id!==e})))})).then((function(n){c("Removed ".concat(t.find((function(t){return t.id===e})).name,"!"))})).catch((function(n){n.response?c("Couldn't find ".concat(t.find((function(t){return t.id===e})).name,"!")):n.request?c("Server didn't respond!"):c("Unknown error.")})),setTimeout((function(){c(null)}),4e3))};return 0===t.length?Object(u.jsx)("div",{children:"No entries in the phonebook."}):0===n.length?Object(u.jsx)("div",{children:t.map((function(e){return Object(u.jsx)(a,{id:e.id,name:e.name,number:e.number,deletePerson:s},e.id)}))}):Object(u.jsx)("div",{children:n.map((function(e){return Object(u.jsx)(a,{id:e.id,name:e.name,number:e.number,deletePerson:s},e.id)}))})},f=n(18),m=function(e){var t=e.people,n=e.setFilterResults;return Object(u.jsx)("input",{onChange:function(e){var r=e.target.value.trim();r.length>0?n(t.filter((function(e){return e.name.toLowerCase().includes(r.toLowerCase())}))):n(Object(f.a)(t))}})},p=n(8),O=function(e){var t=e.people,n=e.newName,r=e.newNumber,c=e.setNewName,s=e.setNewNumber,o=e.setPeople,i=e.setMessage,a={name:n,number:r},d=!1;return Object(u.jsx)("div",{children:Object(u.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),0!==n.length&&0!==r.length){if(0!==n.length||0!==r.length){for(var u=0;u<t.length;u++){if(t[u].name.toLowerCase()===n.toLowerCase()&&t[u].number!==r){if(window.confirm("".concat(n," is already in the phonebook, replace the old number with a new one?"))){b.updateNumber(t[u].id,Object(p.a)(Object(p.a)({},t[u]),{},{number:r})).then((function(e){return o(t.map((function(t){return t.id===e.id?e:t})))})).then((function(e){i("Updated ".concat(n,"'s phone number!"))})).catch((function(e){e.response?i(e.response.data):e.request?i("Server didn't respond!"):i("Unknown error.")})),setTimeout((function(){i(null)}),4e3),d=!0;break}return}t[u].name.toLowerCase()===n.toLowerCase()&&t[u].number===r&&(i("".concat(n," already has this phone number!")),setTimeout((function(){i(null)}),4e3),d=!0)}d||(b.createPerson(a).then((function(e){o(t.concat(e)),i("Added ".concat(n,"!"))})).catch((function(e){e.response?i(e.response.data):e.request?i("Server didn't respond!"):i("Unknown error.")})),setTimeout((function(){i(null)}),4e3)),c(""),s("")}}else alert("A field can not be empty!")},children:[Object(u.jsx)("table",{width:"200",children:Object(u.jsx)("tbody",{children:Object(u.jsxs)("tr",{children:[Object(u.jsxs)("td",{children:["Name: ",Object(u.jsx)("input",{value:n,onChange:function(e){c(e.target.value)}})]}),Object(u.jsxs)("td",{children:["Phone number: ",Object(u.jsx)("input",{type:"tel",value:r,onChange:function(e){s(e.target.value)}})]})]})})}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"Add to phonebook!"})})]})})},x=(n(42),function(e){var t=e.message;return null!==t&&0!==t.length?t.includes("Added")||t.includes("Updated")||t.includes("Removed")?Object(u.jsx)("div",{className:"green",children:t}):Object(u.jsx)("div",{className:"red",children:t}):Object(u.jsx)("div",{})}),g=(n(43),function(){var e=Object(r.useState)([]),t=Object(i.a)(e,2),n=t[0],c=t[1];Object(r.useEffect)((function(){b.getAll().then((function(e){c(e)}))}),[]);var s=Object(r.useState)(""),o=Object(i.a)(s,2),a=o[0],d=o[1],l=Object(r.useState)(""),j=Object(i.a)(l,2),f=j[0],p=j[1],g=Object(r.useState)(""),v=Object(i.a)(g,2),w=v[0],N=v[1],P=Object(r.useState)([]),k=Object(i.a)(P,2),y=k[0],C=k[1];return Object(u.jsx)("center",{children:Object(u.jsxs)("div",{children:[Object(u.jsxs)("h1",{children:["Phonebook ",Object(u.jsx)("img",{alt:"telephone icon",src:"phone.png"})]}),Object(u.jsx)("h4",{children:"Search entries"}),Object(u.jsx)(m,{people:n,setNewName:d,setNewNumber:p,setPeople:c,setFilterResults:C}),Object(u.jsx)("h4",{children:"Add a new entry"}),Object(u.jsx)(O,{people:n,setPeople:c,newName:a,setNewName:d,newNumber:f,setNewNumber:p,message:w,setMessage:N}),Object(u.jsx)("h2",{children:"Numbers"}),Object(u.jsx)(h,{people:n,setPeople:c,filterResults:y,setMessage:N}),Object(u.jsx)(x,{message:w})]})})});o.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(g,{})}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.375093e2.chunk.js.map